<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Surprise</title>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
body, html{margin:0;padding:0;width:100%;height:100%;font-family:Poppins,sans-serif;overflow:hidden;background:linear-gradient(135deg,#1e1b4b,#7c3aed);color:white;}
.intro{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:20px;z-index:20;}
.title{font-size:clamp(28px,5vw,56px);font-weight:700;}
.btn{padding:16px 26px;border:none;border-radius:999px;font-size:18px;font-weight:700;color:white;cursor:pointer;background:linear-gradient(135deg,#f472b6,#60a5fa,#34d399);animation:pulse 1.2s infinite;}
@keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
.scene{position:absolute;inset:0;display:none;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:18px;padding:20px;}
.scene.active{display:flex;}
.cake-container{position:relative; z-index:2;}
.cake-layer{width:120px; height:40px; background:#ffb6c1; border-radius:12px; margin-bottom:4px; position:relative;}
.candle{width:8px; height:25px; background:#ff0; position:absolute; top:-25px; left:50%; transform:translateX(-50%); border-radius:3px;}
.flame{width:10px; height:10px; background:orange; position:absolute; top:-10px; left:50%; transform:translateX(-50%) rotate(45deg); border-radius:50%; filter:blur(2px);}
#fireworksCanvas{position:absolute;inset:0;z-index:1;pointer-events:none;}
.scene2-text{position:relative; z-index:2; font-size:clamp(22px,3vw,36px); font-weight:700; margin-top:20px;}
.scene2-btn{margin-top:20px; padding:12px 20px; border:none; border-radius:999px; background:linear-gradient(135deg,#fbbf24,#f472b6); font-weight:700; cursor:pointer;}
.scene3-container{display:flex; width:100%; height:100%; padding:40px; gap:0px; box-sizing:border-box;}
.message{flex:1; background:rgba(255,255,255,0.9); color:#0f172a; padding:24px; border-radius:20px; font-size:clamp(11px,2vw,17px); line-height:1.5; overflow-y:auto;}
.cursor{display:inline-block;width:10px;height:1.1em;background:#0f172a;margin-left:4px;animation:blink 1s step-end infinite;}
@keyframes blink{50%{opacity:0}}
.photos{flex:2.5; position:relative; overflow:hidden; border-radius:20px;}
.photos img{position:absolute; border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.35); object-fit:contain;}
.badge{position:fixed; top:18px; left:18px; font-weight:800; text-shadow:0 2px 8px rgba(0,0,0,.35); z-index:40;}
.badge .date{font-size:14px; opacity:.9;}
.balloon{position:absolute; bottom:-20vh; width:28px; height:36px; border-radius:50% 50% 45% 45%; background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.7), rgba(255,255,255,.2) 35%, transparent 36%), #ff6bcb); box-shadow:0 8px 18px rgba(0,0,0,.25);}
.balloon::after{content:''; position:absolute; bottom:-12px; left:50%; transform:translateX(-50%); width:2px; height:22px; background:rgba(255,255,255,.7);}
</style>
</head>
<body>
<div class="badge"><div>by Abi kidus to Lily</div><div class="date">08/11/2025</div></div>

<section class="intro" id="intro">
  <h1 class="title">Welcome ‚Äî ready for a surprise?</h1>
  <button class="btn" id="openBtn">Open Your Surprise üéÅ</button>
  <div id="introBalloons"></div>
</section>

<main>
  <section class="scene" id="scene2">
    <canvas id="fireworksCanvas"></canvas>
    <div class="cake-container">
      <div class="cake-layer"></div>
      <div class="cake-layer"></div>
      <div class="cake-layer"></div>
      <div class="candle"><div class="flame"></div></div>
    </div>
    <div class="scene2-text">Happy 18th Birthday Lily üéâ</div>
    <button class="scene2-btn" id="toScene3Btn">Click</button>
    <audio id="fireworksSound" src="fireworks.mp3" loop preload="auto"></audio>
  </section>

  <section class="scene" id="scene3">
    <div class="scene3-container">
      <div class="photos" id="photosContainer"></div>
      <div class="message" style="flex:1"><div id="typeTarget"></div><span class="cursor" id="cursor"></span></div>
    </div>
  </section>
</main>

<audio id="bgm" src="music.mp3" preload="auto"></audio>

<script>
const MESSAGE = `Congratulations on reaching this amazing milestone! Today is all about celebrating you‚Äîyour journey so far, all your achievements, and the incredible person you are becoming. May this year bring you endless laughter, exciting adventures, and memories that you will cherish forever. Keep chasing your dreams fearlessly, embracing new opportunities, and never forget how much joy and inspiration you bring to those around you. You deserve every bit of happiness, love, and success that life has to offer. Cheers to an amazing 18th year filled with bright moments, big dreams, and everything your heart desires!. Happy Birthday! ‚ú®üéÇüíñü•≥üíõ; Happy Birthday! ü•≥üíõ`;
const IMAGE_URLS = Array.from({length:115},(_,i)=>`images/img${i+1}.jpg`);

function wait(ms){return new Promise(r=>setTimeout(r,ms));}
function typewriter(el,text,speed=26){return new Promise(resolve=>{let i=0;function tick(){el.textContent+=text.charAt(i);i++;if(i<text.length)setTimeout(tick,speed);else resolve();}tick();});}
function showScene(id){document.querySelectorAll('.scene').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');}
function spawnIntroBalloons(){
  const wrap=document.getElementById('introBalloons');
  const colors=['#ff6bcb','#60a5fa','#34d399','#fbbf24','#a78bfa','#ffd166'];
  for(let i=0;i<12;i++){
    const b=document.createElement('div'); b.className='balloon';
    b.style.left=Math.random()*100+'%';
    b.style.background=`radial-gradient(circle at 30% 30%, rgba(255,255,255,.7), rgba(255,255,255,.2) 35%, transparent 36%), ${colors[i%colors.length]}`;
    wrap.appendChild(b);
    gsap.to(b,{y:-window.innerHeight*1.3,duration:3.5,delay:Math.random(),ease:'sine.in',repeat:-1});
    gsap.to(b,{x:'+=40',duration:8,yoyo:true,repeat:-1,ease:'sine.inOut'});
  }
}

function startFireworks(){
  const canvas=document.getElementById('fireworksCanvas');
  const ctx=canvas.getContext('2d');
  canvas.width=window.innerWidth; canvas.height=window.innerHeight;
  let fireworks=[],particles=[];
  function rand(min,max){return Math.random()*(max-min)+min;}
  class Firework{
    constructor(){this.x=rand(0,canvas.width); this.y=canvas.height; this.targetY=rand(0,canvas.height/2); this.color=`hsl(${rand(0,360)},100%,50%)`; this.done=false;}
    update(){this.y-=5; if(this.y<=this.targetY){this.done=true; for(let i=0;i<30;i++){particles.push(new Particle(this.x,this.y,this.color));}}}
    draw(){ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,3,0,Math.PI*2); ctx.fill();}
  }
  class Particle{
    constructor(x,y,color){this.x=x; this.y=y; this.color=color; this.vx=rand(-1,1); this.vy=rand(-1,1); this.life=60;}
    update(){this.x+=this.vx; this.y+=this.vy; this.vy+=0.05; this.life--;}
    draw(){ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,2,0,Math.PI*2); ctx.fill();}
  }
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    if(Math.random()<0.03) fireworks.push(new Firework());
    fireworks.forEach(f=>{f.update(); f.draw();});
    fireworks=fireworks.filter(f=>!f.done);
    particles.forEach(p=>{p.update(); p.draw();});
    particles=particles.filter(p=>p.life>0);
    requestAnimationFrame(animate);
  }
  animate();
}

function startPhotos(){
  const container=document.getElementById('photosContainer');
  const movers=[];
  IMAGE_URLS.forEach(src=>{
    const img=new Image();
    img.src=src;
    img.onload=()=>{
      const w=gsap.utils.random(60,90);
      img.style.width=w+'px';
      let x=Math.random()*(container.clientWidth-w-20);
      let y=Math.random()*(container.clientHeight-w*img.naturalHeight/img.naturalWidth);
      img.style.left=x+'px'; img.style.top=y+'px';
      container.appendChild(img);
      let vx=gsap.utils.random(0.5,1.5)/10, vy=gsap.utils.random(0.5,1.5)/10;
      movers.push({el:img,x,y,w:img.width,h:img.height,vx,vy});
    }
  });
  let last=performance.now();
  function tick(now){
    const dt=(now-last)/1; last=now;
    movers.forEach(m=>{
      m.x+=m.vx*dt; m.y+=m.vy*dt;
      if(m.x<=0){m.x=0;m.vx*=-1}else if(m.x+m.w>=container.clientWidth){m.x=container.clientWidth-m.w;m.vx*=-1}
      if(m.y<=0){m.y=0;m.vy*=-1}else if(m.y+m.h>=container.clientHeight){m.y=container.clientHeight-m.h;m.vy*=-1}
      m.el.style.left=m.x+'px'; m.el.style.top=m.y+'px';
    });
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

function animateFlame(){
  const flame=document.querySelector('.flame');
  gsap.to(flame,{y:'-=3', duration:0.3, yoyo:true, repeat:-1, ease:'sine.inOut'});
  gsap.to(flame,{scale:0.8, duration:0.3, yoyo:true, repeat:-1, ease:'sine.inOut'});
}

document.getElementById('openBtn').addEventListener('click',()=>{
  document.getElementById('intro').style.display='none';
  document.getElementById('bgm').play().catch(()=>{});
  showScene('scene2');
  startFireworks();
  animateFlame();
  document.getElementById('fireworksSound').play().catch(()=>{});
});

document.getElementById('toScene3Btn').addEventListener('click',async()=>{
  showScene('scene3');
  startPhotos();
  await typewriter(document.getElementById('typeTarget'), MESSAGE, 20);
  document.getElementById('cursor').style.display='none';
});

spawnIntroBalloons();
</script>
</body>
</html>
